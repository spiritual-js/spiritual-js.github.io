<!DOCTYPE html>
<html id="spiritual-gui">
	<head>
		<title>dom &#x2013; Spiritual GUI</title>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="/css/styles.min.css">
		<script src="/js/scripts.min.js"></script>
	</head>
	<body>
		<main>
			<h1>dom</h1>
			<p>The <code>dom</code> plugin handles DOM navigation and manipulation with a focus on navigating and manipulating the <em>spirits</em> associated to DOM elements. It is less suited for general DOM navigation, so you might want to compliment Spiritual GUI with some like jQuery for that.</p>


			<h2 id="queries">Queries</h2>
			<p>The spirit can lookup elements and other spirits using CSS selectors. The <code>selector</code> is required, the <code>type</code>, is optional.</p>
			<pre class="language-javascript">
<code><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">q<span class="token punctuation">(</span></span>selector<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// first descendant
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">qall<span class="token punctuation">(</span></span>selector<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// all descendants
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">qdoc<span class="token punctuation">(</span></span>selector<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// first in document
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">qdocall<span class="token punctuation">(</span></span>selector<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// all in document</span></code>
</pre>
			<p>Given a single argument, the CSS selector, the methods return either a DOM element or an array of elements.</p><p>
			<pre class="language-javascript">
<code><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">q<span class="token punctuation">(</span></span><span class="token string">&apos;a&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// [object HTMLAnchorElement]
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">qall<span class="token punctuation">(</span></span><span class="token string">&apos;a&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 23</span></code>
</pre>
			</p><p>The second argument <code>type</code> is a spirit constructor. When specified, the methods return either a spirit or an array of spirits. You can use <code>gui.Spirit</code> to find any kind of spirit.</p>
			<pre class="language-javascript">
<code><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">q<span class="token punctuation">(</span></span><span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span> gui<span class="token punctuation">.</span>Spirit<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// [object MyLinkSpirit]
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">qall<span class="token punctuation">(</span></span><span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span> MyLinkSpirit<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 23</span></code>
</pre>
			<p>The two methods <code>qdoc</code> and <code>qdocall</code> work the same way, except they search from the document node instead of the spririts DOM subtree.</p>


			<h2 id="navigation">Navigation</h2>
			<p>The <code>dom</code> plugin also features more traditional methods for navigating back and forth in the DOM structure. The <code>type</code> argument is optional.</p>
			<pre class="language-javascript">
<code><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">parent<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// parent element or spirit of type
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">child<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// first child element (or spirit)
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">children<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// all children
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">ancestor<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// first ancestor
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">ancestors<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// all ancestors
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">descendant<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// first descendant
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">descendants<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// all descendants
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">next<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// next sibiling (of type)
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">previous<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// previous sibling
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">following<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// all following siblings
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">preceding<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// all preceding siblings
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">first<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// first child (or spirit of type)
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">last<span class="token punctuation">(</span></span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// last child (or spirit of type)</span></code>
</pre>
			<p>If you omit the <code>type</code> argument, these methods will return either a DOM element or an array of elements. In this case, some methods become redundant. For example, <code>parent()</code> and <code>ancestor()</code> always return the same element.</p>
			<p>If you add a second argument in the form of a spirit constructor, the methods can be used to lookup spirits. Use <code>gui.Spirit</code> to lookup all kinds of spirits.</p>
			<pre class="language-javascript">
<code><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">descendants<span class="token punctuation">(</span></span>gui<span class="token punctuation">.</span>Spirit<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 23
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">ancestor<span class="token punctuation">(</span></span>TopMenuSpirit<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// [object TopMenuSpirit]
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">last<span class="token punctuation">(</span></span>ButtonSpirit<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// [object ButtonSpirit]</span></code>
</pre>
			<p>We&apos;ll save the detailed walkthrough of these methods for a more convenient time. Let&apos;s talk about DOM manipulation.</p>

			<h2 id="manipulation">Manipulation</h2>
			<p>The following methods can be used to insert things inside-of, instead-of or next-to the spirit. They share the same signature.</p>
			<pre class="language-javascript">
<code><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">append<span class="token punctuation">(</span></span>things<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// append element(s) or spirit(s)
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">prepend<span class="token punctuation">(</span></span>things<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// prepend thing(s)
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">before<span class="token punctuation">(</span></span>things<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// insert thing(s) before
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">after<span class="token punctuation">(</span></span>things<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// insert things(s) after
</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">replace<span class="token punctuation">(</span></span>things<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// replace with thing(s)</span></code>
</pre>
			<p>The <code>things</code> argument is complicated. It can be either:</p>
			<ul>
				<li>A node</li>
				<li>An array of nodes</li>
				<li>A NodeList</li>
				<li>A spirit</li>
				<li>An array of spirits</li>
				<li>An array of nodes and spirits</li>
			</ul>
			<p>There&apos;s also this method.</p>
			<pre class="language-javascript">
<code><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">appendTo<span class="token punctuation">(</span></span>thing<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// append to element or spirit</span></code>
</pre>
			<p>It goes along with some methods that are still under development.</p>
			<p class="todo">Add methods <code>insertBefore</code> and so on + add a note on second-step navigation (stuff only works in spirits).</p>
			<p>
		</p></main>
		<aside>
			<nav id="nav">
				<li><a href="/gui/index.html">Spirits</a></li>
				<li><a href="/gui/lifecycle.html">Lifecycle</a></li>
				<li><a href="/gui/callbacks.html">Callbacks</a></li>
				<li><a href="/gui/plugins.html">Plugins</a><nav>
					<li><a href="/gui/plugin-action.html">action</a></li>
					<li><a href="/gui/plugin-att.html">att</a></li>
					<li><a href="/gui/plugin-box.html">box</a></li>
					<li><a href="/gui/plugin-broadcast.html">broadcast</a></li>
					<li><a href="/gui/plugin-config.html">config</a></li>
					<li><a href="/gui/plugin-css.html">css</a></li>
					<li><a href="/gui/plugin-dom.html">dom</a></li>
					<li><a href="/gui/plugin-event.html">event</a></li>
					<li><a href="/gui/plugin-life.html">life</a></li>
					<li><a href="/gui/plugin-tick.html">tick</a></li></nav></li>
				<li><a href="/gui/classes.html">Classes</a></li>
				<li><a href="/gui/projects.html">Projects</a></li>
				<li><a href="/gui/caveats.html">Caveats</a></li>
				<li><a href="/gui/contribute.html">Contribute</a></li>
			</nav>
		</aside>
	</body>
</html>